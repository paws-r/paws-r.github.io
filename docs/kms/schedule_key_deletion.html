<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Schedules the deletion of a KMS key — kms_schedule_key_deletion • paws</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script href="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script href="../pkgdown.js"></script><meta property="og:title" content="Schedules the deletion of a KMS key — kms_schedule_key_deletion"><meta property="og:description" content="Schedules the deletion of a KMS key. By default, KMS applies a waiting
period of 30 days, but you can specify a waiting period of 7-30 days.
When this operation is successful, the key state of the KMS key changes
to PendingDeletion and the key can't be used in any cryptographic
operations. It remains in this state for the duration of the waiting
period. Before the waiting period ends, you can use
cancel_key_deletion to cancel the deletion
of the KMS key. After the waiting period ends, KMS deletes the KMS key,
its key material, and all KMS data associated with it, including all
aliases that refer to it.
Deleting a KMS key is a destructive and potentially dangerous operation.
When a KMS key is deleted, all data that was encrypted under the KMS key
is unrecoverable. (The only exception is a multi-Region replica key.) To
prevent the use of a KMS key without deleting it, use
disable_key.
If you schedule deletion of a KMS key from a custom key store,
when the waiting period expires,
schedule_key_deletion deletes the KMS key
from KMS. Then KMS makes a best effort to delete the key material from
the associated CloudHSM cluster. However, you might need to manually
delete the orphaned key material
from the cluster and its backups.
You can schedule the deletion of a multi-Region primary key and its
replica keys at any time. However, KMS will not delete a multi-Region
primary key with existing replica keys. If you schedule the deletion of
a primary key with replicas, its key state changes to
PendingReplicaDeletion and it cannot be replicated or used in
cryptographic operations. This status can continue indefinitely. When
the last of its replicas keys is deleted (not just scheduled), the key
state of the primary key changes to PendingDeletion and its waiting
period (PendingWindowInDays) begins. For details, see Deleting multi-Region keys
in the Key Management Service Developer Guide.
For more information about scheduling a KMS key for deletion, see
Deleting KMS keys
in the Key Management Service Developer Guide.
The KMS key that you use for this operation must be in a compatible key
state. For details, see Key states of KMS keys
in the Key Management Service Developer Guide.
Cross-account use: No. You cannot perform this operation on a KMS
key in a different Amazon Web Services account.
Required permissions: kms:ScheduleKeyDeletion (key policy)
Related operations
cancel_key_deletion
disable_key

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="..">paws</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
</li>
<li>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/paws-r/paws/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Schedules the deletion of a KMS key</h1>
    <small class="dont-index">Source: <a href="https://github.com/paws-r/paws/blob/HEAD/R/kms_operations.R" class="external-link"><code>R/kms_operations.R</code></a></small>
    <div class="hidden name"><code>kms_schedule_key_deletion.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Schedules the deletion of a KMS key. By default, KMS applies a waiting
period of 30 days, but you can specify a waiting period of 7-30 days.
When this operation is successful, the key state of the KMS key changes
to <code>PendingDeletion</code> and the key can't be used in any cryptographic
operations. It remains in this state for the duration of the waiting
period. Before the waiting period ends, you can use
<code><a href="kms_cancel_key_deletion.html">cancel_key_deletion</a></code> to cancel the deletion
of the KMS key. After the waiting period ends, KMS deletes the KMS key,
its key material, and all KMS data associated with it, including all
aliases that refer to it.</p>
<p>Deleting a KMS key is a destructive and potentially dangerous operation.
When a KMS key is deleted, all data that was encrypted under the KMS key
is unrecoverable. (The only exception is a multi-Region replica key.) To
prevent the use of a KMS key without deleting it, use
<code><a href="kms_disable_key.html">disable_key</a></code>.</p>
<p>If you schedule deletion of a KMS key from a <a href="https://docs.aws.amazon.com/kms/latest/developerguide/custom-key-store-overview.html" class="external-link">custom key store</a>,
when the waiting period expires,
<code>schedule_key_deletion</code> deletes the KMS key
from KMS. Then KMS makes a best effort to delete the key material from
the associated CloudHSM cluster. However, you might need to manually
<a href="https://docs.aws.amazon.com/kms/latest/developerguide/fix-keystore.html#fix-keystore-orphaned-key" class="external-link">delete the orphaned key material</a>
from the cluster and its backups.</p>
<p>You can schedule the deletion of a multi-Region primary key and its
replica keys at any time. However, KMS will not delete a multi-Region
primary key with existing replica keys. If you schedule the deletion of
a primary key with replicas, its key state changes to
<code>PendingReplicaDeletion</code> and it cannot be replicated or used in
cryptographic operations. This status can continue indefinitely. When
the last of its replicas keys is deleted (not just scheduled), the key
state of the primary key changes to <code>PendingDeletion</code> and its waiting
period (<code>PendingWindowInDays</code>) begins. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-delete.html" class="external-link">Deleting multi-Region keys</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p>For more information about scheduling a KMS key for deletion, see
<a href="https://docs.aws.amazon.com/kms/latest/developerguide/deleting-keys.html" class="external-link">Deleting KMS keys</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p>The KMS key that you use for this operation must be in a compatible key
state. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html" class="external-link">Key states of KMS keys</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p><strong>Cross-account use</strong>: No. You cannot perform this operation on a KMS
key in a different Amazon Web Services account.</p>
<p><strong>Required permissions</strong>: kms:ScheduleKeyDeletion (key policy)</p>
<p><strong>Related operations</strong></p><ul><li><p><code><a href="kms_cancel_key_deletion.html">cancel_key_deletion</a></code></p></li>
<li><p><code><a href="kms_disable_key.html">disable_key</a></code></p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">kms_schedule_key_deletion</span><span class="op">(</span><span class="va">KeyId</span>, <span class="va">PendingWindowInDays</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>KeyId</dt>
<dd><p>[required] The unique identifier of the KMS key to delete.</p>
<p>Specify the key ID or key ARN of the KMS key.</p>
<p>For example:</p><ul><li><p>Key ID: <code>1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
<li><p>Key ARN:
<code>arn:aws:kms:us-east-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
</ul><p>To get the key ID and key ARN for a KMS key, use
<code><a href="kms_list_keys.html">list_keys</a></code> or <code><a href="kms_describe_key.html">describe_key</a></code>.</p></dd>


<dt>PendingWindowInDays</dt>
<dd><p>The waiting period, specified in number of days. After the waiting
period ends, KMS deletes the KMS key.</p>
<p>If the KMS key is a multi-Region primary key with replica keys, the
waiting period begins when the last of its replica keys is deleted.
Otherwise, the waiting period begins immediately.</p>
<p>This value is optional. If you include a value, it must be between 7 and
30, inclusive. If you do not include a value, it defaults to 30.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with the following syntax:</p>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">KeyId =</span> <span class="st">"string"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">DeletionDate =</span> <span class="fu">as.POSIXct</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2015-01-01"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">KeyState =</span> <span class="st">"Creating"</span><span class="sc">|</span><span class="st">"Enabled"</span><span class="sc">|</span><span class="st">"Disabled"</span><span class="sc">|</span><span class="st">"PendingDeletion"</span><span class="sc">|</span><span class="st">"PendingImport"</span><span class="sc">|</span><span class="st">"PendingReplicaDeletion"</span><span class="sc">|</span><span class="st">"Unavailable"</span><span class="sc">|</span><span class="st">"Updating"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">PendingWindowInDays =</span> <span class="dv">123</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre><p></p></div>


    </div>
    <div id="request-syntax">
    <h2>Request syntax</h2>
    


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>svc<span class="sc">$</span><span class="fu">schedule_key_deletion</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">KeyId =</span> <span class="st">"string"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">PendingWindowInDays =</span> <span class="dv">123</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre><p></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="co"># The following example schedules the specified KMS key for deletion.</span></span>
<span><span class="va">svc</span><span class="op">$</span><span class="fu">schedule_key_deletion</span><span class="op">(</span></span>
<span>  KeyId <span class="op">=</span> <span class="st">"1234abcd-12ab-34cd-56ef-1234567890ab"</span>,</span>
<span>  PendingWindowInDays <span class="op">=</span> <span class="fl">7L</span></span>
<span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Kretch, Adam Banker, Dyfan Jones.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

