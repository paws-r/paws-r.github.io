<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Imports key material into an existing symmetric encryption KMS key that
was created without key material — kms_import_key_material • paws</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script href="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script href="../pkgdown.js"></script><meta property="og:title" content="Imports key material into an existing symmetric encryption KMS key that
was created without key material — kms_import_key_material"><meta property="og:description" content="Imports key material into an existing symmetric encryption KMS key that
was created without key material. After you successfully import key
material into a KMS key, you can reimport the same key material
into that KMS key, but you cannot import different key material.
You cannot perform this operation on an asymmetric KMS key, an HMAC KMS
key, or on any KMS key in a different Amazon Web Services account. For
more information about creating KMS keys with no key material and then
importing key material, see Importing Key Material
in the Key Management Service Developer Guide.
Before using this operation, call
get_parameters_for_import. Its
response includes a public key and an import token. Use the public key
to encrypt the key material. Then, submit the import token from the same
get_parameters_for_import response.
When calling this operation, you must specify the following values:
The key ID or key ARN of a KMS key with no key material. Its
Origin must be EXTERNAL.
To create a KMS key with no key material, call
create_key and set the value of its Origin
parameter to EXTERNAL. To get the Origin of a KMS key, call
describe_key.)
The encrypted key material. To get the public key to encrypt the key
material, call
get_parameters_for_import.
The import token that
get_parameters_for_import
returned. You must use a public key and token from the same
get_parameters_for_import
response.
Whether the key material expires and if so, when. If you set an
expiration date, KMS deletes the key material from the KMS key on
the specified date, and the KMS key becomes unusable. To use the KMS
key again, you must reimport the same key material. The only way to
change an expiration date is by reimporting the same key material
and specifying a new expiration date.


When this operation is successful, the key state of the KMS key changes
from PendingImport to Enabled, and you can use the KMS key.
If this operation fails, use the exception to help determine the
problem. If the error is related to the key material, the import token,
or wrapping key, use
get_parameters_for_import to get a
new public key and import token for the KMS key and repeat the import
procedure. For help, see How To Import Key Material
in the Key Management Service Developer Guide.
The KMS key that you use for this operation must be in a compatible key
state. For details, see Key states of KMS keys
in the Key Management Service Developer Guide.
Cross-account use: No. You cannot perform this operation on a KMS
key in a different Amazon Web Services account.
Required permissions:
kms:ImportKeyMaterial
(key policy)
Related operations:
delete_imported_key_material
get_parameters_for_import

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="..">paws</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
</li>
<li>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/paws-r/paws/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Imports key material into an existing symmetric encryption KMS key that
was created without key material</h1>
    <small class="dont-index">Source: <a href="https://github.com/paws-r/paws/blob/HEAD/R/kms_operations.R" class="external-link"><code>R/kms_operations.R</code></a></small>
    <div class="hidden name"><code>kms_import_key_material.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Imports key material into an existing symmetric encryption KMS key that
was created without key material. After you successfully import key
material into a KMS key, you can <a href="https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html#reimport-key-material" class="external-link">reimport the same key material</a>
into that KMS key, but you cannot import different key material.</p>
<p>You cannot perform this operation on an asymmetric KMS key, an HMAC KMS
key, or on any KMS key in a different Amazon Web Services account. For
more information about creating KMS keys with no key material and then
importing key material, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html" class="external-link">Importing Key Material</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p>Before using this operation, call
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code>. Its
response includes a public key and an import token. Use the public key
to encrypt the key material. Then, submit the import token from the same
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code> response.</p>
<p>When calling this operation, you must specify the following values:</p><ul><li><p>The key ID or key ARN of a KMS key with no key material. Its
<code>Origin</code> must be <code>EXTERNAL</code>.</p>
<p>To create a KMS key with no key material, call
<code><a href="kms_create_key.html">create_key</a></code> and set the value of its <code>Origin</code>
parameter to <code>EXTERNAL</code>. To get the <code>Origin</code> of a KMS key, call
<code><a href="kms_describe_key.html">describe_key</a></code>.)</p></li>
<li><p>The encrypted key material. To get the public key to encrypt the key
material, call
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code>.</p></li>
<li><p>The import token that
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code>
returned. You must use a public key and token from the same
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code>
response.</p></li>
<li><p>Whether the key material expires and if so, when. If you set an
expiration date, KMS deletes the key material from the KMS key on
the specified date, and the KMS key becomes unusable. To use the KMS
key again, you must reimport the same key material. The only way to
change an expiration date is by reimporting the same key material
and specifying a new expiration date.</p></li>
</ul><p>When this operation is successful, the key state of the KMS key changes
from <code>PendingImport</code> to <code>Enabled</code>, and you can use the KMS key.</p>
<p>If this operation fails, use the exception to help determine the
problem. If the error is related to the key material, the import token,
or wrapping key, use
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code> to get a
new public key and import token for the KMS key and repeat the import
procedure. For help, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html#importing-keys-overview" class="external-link">How To Import Key Material</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p>The KMS key that you use for this operation must be in a compatible key
state. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html" class="external-link">Key states of KMS keys</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p><strong>Cross-account use</strong>: No. You cannot perform this operation on a KMS
key in a different Amazon Web Services account.</p>
<p><strong>Required permissions</strong>:
<a href="https://docs.aws.amazon.com/kms/latest/developerguide/kms-api-permissions-reference.html" class="external-link">kms:ImportKeyMaterial</a>
(key policy)</p>
<p><strong>Related operations:</strong></p><ul><li><p><code><a href="kms_delete_imported_key_material.html">delete_imported_key_material</a></code></p></li>
<li><p><code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code></p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">kms_import_key_material</span><span class="op">(</span><span class="va">KeyId</span>, <span class="va">ImportToken</span>, <span class="va">EncryptedKeyMaterial</span>,</span>
<span>  <span class="va">ValidTo</span>, <span class="va">ExpirationModel</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>KeyId</dt>
<dd><p>[required] The identifier of the symmetric encryption KMS key that receives the
imported key material. This must be the same KMS key specified in the
<code>KeyID</code> parameter of the corresponding
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code> request.
The <code>Origin</code> of the KMS key must be <code>EXTERNAL</code>. You cannot perform this
operation on an asymmetric KMS key, an HMAC KMS key, a KMS key in a
custom key store, or on a KMS key in a different Amazon Web Services
account</p>
<p>Specify the key ID or key ARN of the KMS key.</p>
<p>For example:</p><ul><li><p>Key ID: <code>1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
<li><p>Key ARN:
<code>arn:aws:kms:us-east-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
</ul><p>To get the key ID and key ARN for a KMS key, use
<code><a href="kms_list_keys.html">list_keys</a></code> or <code><a href="kms_describe_key.html">describe_key</a></code>.</p></dd>


<dt>ImportToken</dt>
<dd><p>[required] The import token that you received in the response to a previous
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code> request. It
must be from the same response that contained the public key that you
used to encrypt the key material.</p></dd>


<dt>EncryptedKeyMaterial</dt>
<dd><p>[required] The encrypted key material to import. The key material must be encrypted
with the public wrapping key that
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code> returned,
using the wrapping algorithm that you specified in the same
<code><a href="kms_get_parameters_for_import.html">get_parameters_for_import</a></code> request.</p></dd>


<dt>ValidTo</dt>
<dd><p>The time at which the imported key material expires. When the key
material expires, KMS deletes the key material and the KMS key becomes
unusable. You must omit this parameter when the <code>ExpirationModel</code>
parameter is set to <code>KEY_MATERIAL_DOES_NOT_EXPIRE</code>. Otherwise it is
required.</p></dd>


<dt>ExpirationModel</dt>
<dd><p>Specifies whether the key material expires. The default is
<code>KEY_MATERIAL_EXPIRES</code>, in which case you must include the <code>ValidTo</code>
parameter. When this parameter is set to <code>KEY_MATERIAL_DOES_NOT_EXPIRE</code>,
you must omit the <code>ValidTo</code> parameter.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An empty list.</p>
    </div>
    <div id="request-syntax">
    <h2>Request syntax</h2>
    


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>svc<span class="sc">$</span><span class="fu">import_key_material</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">KeyId =</span> <span class="st">"string"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ImportToken =</span> raw,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">EncryptedKeyMaterial =</span> raw,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">ValidTo =</span> <span class="fu">as.POSIXct</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2015-01-01"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">ExpirationModel =</span> <span class="st">"KEY_MATERIAL_EXPIRES"</span><span class="sc">|</span><span class="st">"KEY_MATERIAL_DOES_NOT_EXPIRE"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre><p></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="co"># The following example imports key material into the specified KMS key.</span></span>
<span><span class="va">svc</span><span class="op">$</span><span class="fu">import_key_material</span><span class="op">(</span></span>
<span>  EncryptedKeyMaterial <span class="op">=</span> <span class="st">"&lt;binary data&gt;"</span>,</span>
<span>  ExpirationModel <span class="op">=</span> <span class="st">"KEY_MATERIAL_DOES_NOT_EXPIRE"</span>,</span>
<span>  ImportToken <span class="op">=</span> <span class="st">"&lt;binary data&gt;"</span>,</span>
<span>  KeyId <span class="op">=</span> <span class="st">"1234abcd-12ab-34cd-56ef-1234567890ab"</span></span>
<span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Kretch, Adam Banker, Dyfan Jones.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

