<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changes the primary key of a multi-Region key — kms_update_primary_region • paws</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script href="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script href="../pkgdown.js"></script><meta property="og:title" content="Changes the primary key of a multi-Region key — kms_update_primary_region"><meta property="og:description" content="Changes the primary key of a multi-Region key.
This operation changes the replica key in the specified Region to a
primary key and changes the former primary key to a replica key. For
example, suppose you have a primary key in us-east-1 and a replica key
in eu-west-2. If you run
update_primary_region with a
PrimaryRegion value of eu-west-2, the primary key is now the key in
eu-west-2, and the key in us-east-1 becomes a replica key. For
details, see Updating the primary Region
in the Key Management Service Developer Guide.
This operation supports multi-Region keys, an KMS feature that lets
you create multiple interoperable KMS keys in different Amazon Web
Services Regions. Because these KMS keys have the same key ID, key
material, and other metadata, you can use them interchangeably to
encrypt data in one Amazon Web Services Region and decrypt it in a
different Amazon Web Services Region without re-encrypting the data or
making a cross-Region call. For more information about multi-Region
keys, see Multi-Region keys in KMS
in the Key Management Service Developer Guide.
The primary key of a multi-Region key is the source for properties
that are always shared by primary and replica keys, including the key
material, key ID,
key spec,
key usage,
key material origin,
and automatic key rotation.
It's the only key that can be replicated. You cannot delete the primary key
until all replica keys are deleted.
The key ID and primary Region that you specify uniquely identify the
replica key that will become the primary key. The primary Region must
already have a replica key. This operation does not create a KMS key in
the specified Region. To find the replica keys, use the
describe_key operation on the primary key or any
replica key. To create a replica key, use the
replicate_key operation.
You can run this operation while using the affected multi-Region keys in
cryptographic operations. This operation should not delay, interrupt, or
cause failures in cryptographic operations.
Even after this operation completes, the process of updating the primary
Region might still be in progress for a few more seconds. Operations
such as describe_key might display both the old
and new primary keys as replicas. The old and new primary keys have a
transient key state of Updating. The original key state is restored
when the update is complete. While the key state is Updating, you can
use the keys in cryptographic operations, but you cannot replicate the
new primary key or perform certain management operations, such as
enabling or disabling these keys. For details about the Updating key
state, see Key states of KMS keys
in the Key Management Service Developer Guide.
This operation does not return any output. To verify that primary key is
changed, use the describe_key operation.
Cross-account use: No. You cannot use this operation in a different
Amazon Web Services account.
Required permissions:
kms:UpdatePrimaryRegion on the current primary key (in the primary
key's Region). Include this permission primary key's key policy.
kms:UpdatePrimaryRegion on the current replica key (in the replica
key's Region). Include this permission in the replica key's key
policy.


Related operations
create_key
replicate_key

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="..">paws</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
</li>
<li>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/paws-r/paws/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Changes the primary key of a multi-Region key</h1>
    <small class="dont-index">Source: <a href="https://github.com/paws-r/paws/blob/HEAD/R/kms_operations.R" class="external-link"><code>R/kms_operations.R</code></a></small>
    <div class="hidden name"><code>kms_update_primary_region.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Changes the primary key of a multi-Region key.</p>
<p>This operation changes the replica key in the specified Region to a
primary key and changes the former primary key to a replica key. For
example, suppose you have a primary key in <code>us-east-1</code> and a replica key
in <code>eu-west-2</code>. If you run
<code>update_primary_region</code> with a
<code>PrimaryRegion</code> value of <code>eu-west-2</code>, the primary key is now the key in
<code>eu-west-2</code>, and the key in <code>us-east-1</code> becomes a replica key. For
details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-manage.html#multi-region-update" class="external-link">Updating the primary Region</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p>This operation supports <em>multi-Region keys</em>, an KMS feature that lets
you create multiple interoperable KMS keys in different Amazon Web
Services Regions. Because these KMS keys have the same key ID, key
material, and other metadata, you can use them interchangeably to
encrypt data in one Amazon Web Services Region and decrypt it in a
different Amazon Web Services Region without re-encrypting the data or
making a cross-Region call. For more information about multi-Region
keys, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html" class="external-link">Multi-Region keys in KMS</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p>The <em>primary key</em> of a multi-Region key is the source for properties
that are always shared by primary and replica keys, including the key
material, <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#key-id-key-id" class="external-link">key ID</a>,
<a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#key-spec" class="external-link">key spec</a>,
<a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#key-usage" class="external-link">key usage</a>,
<a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#key-origin" class="external-link">key material origin</a>,
and <a href="https://docs.aws.amazon.com/kms/latest/developerguide/rotate-keys.html" class="external-link">automatic key rotation</a>.
It's the only key that can be replicated. You cannot <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_ScheduleKeyDeletion.html" class="external-link">delete the primary key</a>
until all replica keys are deleted.</p>
<p>The key ID and primary Region that you specify uniquely identify the
replica key that will become the primary key. The primary Region must
already have a replica key. This operation does not create a KMS key in
the specified Region. To find the replica keys, use the
<code><a href="kms_describe_key.html">describe_key</a></code> operation on the primary key or any
replica key. To create a replica key, use the
<code><a href="kms_replicate_key.html">replicate_key</a></code> operation.</p>
<p>You can run this operation while using the affected multi-Region keys in
cryptographic operations. This operation should not delay, interrupt, or
cause failures in cryptographic operations.</p>
<p>Even after this operation completes, the process of updating the primary
Region might still be in progress for a few more seconds. Operations
such as <code><a href="kms_describe_key.html">describe_key</a></code> might display both the old
and new primary keys as replicas. The old and new primary keys have a
transient key state of <code>Updating</code>. The original key state is restored
when the update is complete. While the key state is <code>Updating</code>, you can
use the keys in cryptographic operations, but you cannot replicate the
new primary key or perform certain management operations, such as
enabling or disabling these keys. For details about the <code>Updating</code> key
state, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html" class="external-link">Key states of KMS keys</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p>This operation does not return any output. To verify that primary key is
changed, use the <code><a href="kms_describe_key.html">describe_key</a></code> operation.</p>
<p><strong>Cross-account use</strong>: No. You cannot use this operation in a different
Amazon Web Services account.</p>
<p><strong>Required permissions</strong>:</p><ul><li><p><code>kms:UpdatePrimaryRegion</code> on the current primary key (in the primary
key's Region). Include this permission primary key's key policy.</p></li>
<li><p><code>kms:UpdatePrimaryRegion</code> on the current replica key (in the replica
key's Region). Include this permission in the replica key's key
policy.</p></li>
</ul><p><strong>Related operations</strong></p><ul><li><p><code><a href="kms_create_key.html">create_key</a></code></p></li>
<li><p><code><a href="kms_replicate_key.html">replicate_key</a></code></p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">kms_update_primary_region</span><span class="op">(</span><span class="va">KeyId</span>, <span class="va">PrimaryRegion</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>KeyId</dt>
<dd><p>[required] Identifies the current primary key. When the operation completes, this
KMS key will be a replica key.</p>
<p>Specify the key ID or key ARN of a multi-Region primary key.</p>
<p>For example:</p><ul><li><p>Key ID: <code>mrk-1234abcd12ab34cd56ef1234567890ab</code></p></li>
<li><p>Key ARN:
<code>arn:aws:kms:us-east-2:111122223333:key/mrk-1234abcd12ab34cd56ef1234567890ab</code></p></li>
</ul><p>To get the key ID and key ARN for a KMS key, use
<code><a href="kms_list_keys.html">list_keys</a></code> or <code><a href="kms_describe_key.html">describe_key</a></code>.</p></dd>


<dt>PrimaryRegion</dt>
<dd><p>[required] The Amazon Web Services Region of the new primary key. Enter the Region
ID, such as <code>us-east-1</code> or <code>ap-southeast-2</code>. There must be an existing
replica key in this Region.</p>
<p>When the operation completes, the multi-Region key in this Region will
be the primary key.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An empty list.</p>
    </div>
    <div id="request-syntax">
    <h2>Request syntax</h2>
    


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>svc<span class="sc">$</span><span class="fu">update_primary_region</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">KeyId =</span> <span class="st">"string"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">PrimaryRegion =</span> <span class="st">"string"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre><p></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Kretch, Adam Banker, Dyfan Jones.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

