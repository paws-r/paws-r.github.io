<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generates a hash-based message authentication code (HMAC) for a message
using an HMAC KMS key and a MAC algorithm that the key supports — kms_generate_mac • paws</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css"><script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet"><script src="../../pkgdown.js"></script><meta property="og:title" content="Generates a hash-based message authentication code (HMAC) for a message
using an HMAC KMS key and a MAC algorithm that the key supports — kms_generate_mac"><meta property="og:description" content="Generates a hash-based message authentication code (HMAC) for a message
using an HMAC KMS key and a MAC algorithm that the key supports. The MAC
algorithm computes the HMAC for the message and the key as described in
RFC 2104.
You can use the HMAC that this operation generates with the
verify_mac operation to demonstrate that the
original message has not changed. Also, because a secret key is used to
create the hash, you can verify that the party that generated the hash
has the required secret key. This operation is part of KMS support for
HMAC KMS keys. For details, see HMAC keys in KMS in
the Key Management Service Developer Guide .
Best practices recommend that you limit the time during which any
signing mechanism, including an HMAC, is effective. This deters an
attack where the actor uses a signed message to establish validity
repeatedly or long after the message is superseded. HMAC tags do not
include a timestamp, but you can include a timestamp in the token or
message to help you detect when its time to refresh the HMAC.
The KMS key that you use for this operation must be in a compatible key
state. For details, see Key states of KMS keys
in the Key Management Service Developer Guide.
Cross-account use: Yes. To perform this operation with a KMS key in
a different Amazon Web Services account, specify the key ARN or alias
ARN in the value of the KeyId parameter.
Required permissions:
kms:GenerateMac
(key policy)
Related operations: verify_mac"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">paws</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/paws-r/paws/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates a hash-based message authentication code (HMAC) for a message
using an HMAC KMS key and a MAC algorithm that the key supports</h1>
    <small class="dont-index">Source: <a href="https://github.com/paws-r/paws/blob/HEAD/R/kms_operations.R" class="external-link"><code>R/kms_operations.R</code></a></small>
    <div class="hidden name"><code>kms_generate_mac.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates a hash-based message authentication code (HMAC) for a message
using an HMAC KMS key and a MAC algorithm that the key supports. The MAC
algorithm computes the HMAC for the message and the key as described in
<a href="https://datatracker.ietf.org/doc/html/rfc2104" class="external-link">RFC 2104</a>.</p>
<p>You can use the HMAC that this operation generates with the
<code><a href="kms_verify_mac.html">verify_mac</a></code> operation to demonstrate that the
original message has not changed. Also, because a secret key is used to
create the hash, you can verify that the party that generated the hash
has the required secret key. This operation is part of KMS support for
HMAC KMS keys. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/hmac.html" class="external-link">HMAC keys in KMS</a> in
the <em>Key Management Service Developer Guide</em> .</p>
<p>Best practices recommend that you limit the time during which any
signing mechanism, including an HMAC, is effective. This deters an
attack where the actor uses a signed message to establish validity
repeatedly or long after the message is superseded. HMAC tags do not
include a timestamp, but you can include a timestamp in the token or
message to help you detect when its time to refresh the HMAC.</p>
<p>The KMS key that you use for this operation must be in a compatible key
state. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html" class="external-link">Key states of KMS keys</a>
in the <em>Key Management Service Developer Guide</em>.</p>
<p><strong>Cross-account use</strong>: Yes. To perform this operation with a KMS key in
a different Amazon Web Services account, specify the key ARN or alias
ARN in the value of the <code>KeyId</code> parameter.</p>
<p><strong>Required permissions</strong>:
<a href="https://docs.aws.amazon.com/kms/latest/developerguide/kms-api-permissions-reference.html" class="external-link">kms:GenerateMac</a>
(key policy)</p>
<p><strong>Related operations</strong>: <code><a href="kms_verify_mac.html">verify_mac</a></code></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">kms_generate_mac</span><span class="op">(</span><span class="va">Message</span>, <span class="va">KeyId</span>, <span class="va">MacAlgorithm</span>, <span class="va">GrantTokens</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>Message</dt>
<dd><p>[required] The message to be hashed. Specify a message of up to 4,096 bytes.</p>
<p><code>generate_mac</code> and <code><a href="kms_verify_mac.html">verify_mac</a></code> do
not provide special handling for message digests. If you generate an
HMAC for a hash digest of a message, you must verify the HMAC of the
same hash digest.</p></dd>


<dt>KeyId</dt>
<dd><p>[required] The HMAC KMS key to use in the operation. The MAC algorithm computes the
HMAC for the message and the key as described in <a href="https://datatracker.ietf.org/doc/html/rfc2104" class="external-link">RFC 2104</a>.</p>
<p>To identify an HMAC KMS key, use the <code><a href="kms_describe_key.html">describe_key</a></code>
operation and see the <code>KeySpec</code> field in the response.</p></dd>


<dt>MacAlgorithm</dt>
<dd><p>[required] The MAC algorithm used in the operation.</p>
<p>The algorithm must be compatible with the HMAC KMS key that you specify.
To find the MAC algorithms that your HMAC KMS key supports, use the
<code><a href="kms_describe_key.html">describe_key</a></code> operation and see the <code>MacAlgorithms</code>
field in the <code><a href="kms_describe_key.html">describe_key</a></code> response.</p></dd>


<dt>GrantTokens</dt>
<dd><p>A list of grant tokens.</p>
<p>Use a grant token when your permission to call this operation comes from
a new grant that has not yet achieved <em>eventual consistency</em>. For more
information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/grants.html#grant_token" class="external-link">Grant token</a>
and <a href="https://docs.aws.amazon.com/kms/latest/developerguide/grant-manage.html#using-grant-token" class="external-link">Using a grant token</a>
in the <em>Key Management Service Developer Guide</em>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with the following syntax:</p>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Mac =</span> raw,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">MacAlgorithm =</span> <span class="st">"HMAC_SHA_224"</span><span class="sc">|</span><span class="st">"HMAC_SHA_256"</span><span class="sc">|</span><span class="st">"HMAC_SHA_384"</span><span class="sc">|</span><span class="st">"HMAC_SHA_512"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">KeyId =</span> <span class="st">"string"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre><p></p></div>


    </div>
    <div id="request-syntax">
    <h2>Request syntax</h2>
    


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>svc<span class="sc">$</span><span class="fu">generate_mac</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Message =</span> raw,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">KeyId =</span> <span class="st">"string"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">MacAlgorithm =</span> <span class="st">"HMAC_SHA_224"</span><span class="sc">|</span><span class="st">"HMAC_SHA_256"</span><span class="sc">|</span><span class="st">"HMAC_SHA_384"</span><span class="sc">|</span><span class="st">"HMAC_SHA_512"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">GrantTokens =</span> <span class="fu">list</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"string"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre><p></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="co"># This example generates an HMAC for a message, an HMAC KMS key, and a MAC</span></span>
<span><span class="co"># algorithm. The algorithm must be supported by the specified HMAC KMS</span></span>
<span><span class="co"># key.</span></span>
<span><span class="va">svc</span><span class="op">$</span><span class="fu">generate_mac</span><span class="op">(</span></span>
<span>  KeyId <span class="op">=</span> <span class="st">"1234abcd-12ab-34cd-56ef-1234567890ab"</span>,</span>
<span>  MacAlgorithm <span class="op">=</span> <span class="st">"HMAC_SHA_384"</span>,</span>
<span>  Message <span class="op">=</span> <span class="st">"Hello World"</span></span>
<span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Kretch, Adam Banker, Dyfan Jones.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

